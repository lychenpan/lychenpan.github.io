<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, Happiness" />










<meta property="og:type" content="website">
<meta property="og:title" content="Hello Happiness">
<meta property="og:url" content="http://smilecoder.cc/index.html">
<meta property="og:site_name" content="Hello Happiness">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hello Happiness">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://smilecoder.cc/"/>





  <title>Hello Happiness</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hello Happiness</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Less is More</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Startseite
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archiv
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://smilecoder.cc/2018/03/01/Remove-long-lines-in-document/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lychenpan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello Happiness">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/01/Remove-long-lines-in-document/" itemprop="url">Remove long lines in document</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-01T20:32:15+08:00">
                2018-03-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/OCR/" itemprop="url" rel="index">
                    <span itemprop="name">OCR</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&emsp;Long lines (vertical or horizontal direction) are very common and special situations in printed document,<br>it will result in some unexpected result when performing OCR in document. So it is necessary to remove long lines<br>in pre-processing step of OCR.<br>&emsp;Here i will introduce one method to remove long vertical and horizontal line using morphological operations.<br>&emsp;Firstly, you can check this <a href="https://stackoverflow.com/questions/33949831/whats-the-way-to-remove-all-lines-and-borders-in-imagekeep-texts-programmatic?rq=1" target="_blank" rel="noopener">question</a>; u will get some ideas from here.</p>
<p>&emsp;Key idea is that we use morphological operations to remove all possible characters, then extract long lines<br>from the left components using its size.<br>&emsp;In order to remove characters perfectly, here we assume that the size(width/height) of characters is a known<br>message. (If you are interested how to estimate the size of characters in a document image, you can refer my other<br>blog) </p>
<h6 id="Algorithm"><a href="#Algorithm" class="headerlink" title="Algorithm"></a>Algorithm</h6><p>&emsp;Here we assume the document image is black background and white foreground. And assume the size of characters:<br>(width, height)<br>1.For simple case: there aren’t overlaps between long lines and characters.<br>&emsp;For horizontal lines:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Use a kernel (1, (width*1.5)) to dilate the image, this will remove all the black characters whose size is around (*, width);</span><br><span class="line">Use cv2.findCountours(binary_img) and cv2.boundingRect(contours) to extract the bounding of the left component;</span><br><span class="line">Extract long horizontal lines according to the ratio of width/height ratio. Remove other components;</span><br><span class="line">Erode the image with the kernel same with dilation step.</span><br></pre></td></tr></table></figure></p>
<p>&emsp;For vertial lines, the same method except the morphological operation should use the vertical kernel (height*1.5,1)<br>2.For complicated case: the long line cross some of the characters, such as underline, strikethrough. In this case,<br>when we remove the long lines, the overlaps will aslo be removed, which result in some characters are split to two<br>parts(especially for the strikethrough).<br>A better methods is that: when removing the lines, for the pixel in the line, we will first check the its upper and<br>lower pixels, if they are all black, we can judge that the pixel is a overlap, then the pixel will be kept.<br>We will use morphological operations to complete the judge process.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Erode image with kernel (3,1), to thicker the long line;</span><br><span class="line">Dialte image with kernel (1, width*1.5); </span><br><span class="line">Extract long lines according to left component&apos;s bounding box size, as img1;</span><br><span class="line">Use img1 bitwise_and with initial binary image, get img2;</span><br><span class="line">Calculate the pixels sum in height direction (axis=0) of img1 and img2 </span><br><span class="line">For each pixel in the line, if the img2&apos;s sum is larger than the img1&apos;s sum, we can judge this pixel is part of overlap</span><br></pre></td></tr></table></figure></p>
<h6 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h6><p>Detail can refer my code <a href="https://github.com/lychenpan/little-tools-in-OCR/blob/master/ocr/pre-prcoess/remove_long_lines.py" target="_blank" rel="noopener">on github</a><br>This is the initial document image: <img src="initial.jpg" alt="initial"><br>Result of first simple algorithm: <img src="simple.jpg" alt="Simple process"><br>Result of the second algorithm: <img src="complicated.jpg" alt="Full process"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://smilecoder.cc/2018/02/12/Communication-between-different-AWS-VPCS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lychenpan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello Happiness">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/12/Communication-between-different-AWS-VPCS/" itemprop="url">Ansible module to create AWS EndPoint Service</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-02-12T16:52:00+08:00">
                2018-02-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="How-to-enable-connection-between-different-VPCs"><a href="#How-to-enable-connection-between-different-VPCs" class="headerlink" title="How to enable connection between different VPCs"></a>How to enable connection between different VPCs</h4><ol>
<li>Public IP<br><br>It is easy; But the speed will dependes on public net; also </li>
<li>VPC Peering;<br><br> After peering, two VPC share a same subnet. But it has a number limition.<a href="https://docs.aws.amazon.com/AmazonVPC/latest/PeeringGuide/vpc-peering-basics.html#vpc-peering-limitations" target="_blank" rel="noopener">(Detail)</a></li>
<li>EndPoint Interface<br><br>High speed and safty.  But it is charged.</li>
</ol>
<table>
<thead>
<tr>
<th>Method</th>
<th>Speed</th>
<th>Safety</th>
<th>Number limitation</th>
<th>Cross Region</th>
<th>Price </th>
</tr>
</thead>
<tbody>
<tr>
<td>VPC Peering</td>
<td>High</td>
<td>High</td>
<td><a href="https://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/VPC_Appendix_Limits.html#vpc-limits-peering" target="_blank" rel="noopener">(50/84)</a></td>
<td>US East (N. Virginia), US West (Oregon), EU (Ireland), and US East (Ohio).</td>
<td>Free</td>
</tr>
<tr>
<td>EndPoint</td>
<td>Good</td>
<td>Good</td>
<td>No limit</td>
<td>Impossible</td>
<td>High (in proportion to number of HUE VPCs) </td>
</tr>
<tr>
<td>Public IP</td>
<td>Low (possible to fix by route table)</td>
<td>Low</td>
<td>No limit</td>
<td>Possible</td>
<td>Free if OCR VPC not shutdown</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="Ansible-module-of-endPoint-Service"><a href="#Ansible-module-of-endPoint-Service" class="headerlink" title="Ansible module of endPoint Service"></a>Ansible module of endPoint Service</h4><p>In our project, we use endPoint to establish connection between two different VPCs.<br>However endPoint interface is a new technique borned around 11/2017, so ansible don’t have related module about endPoint interface and endPoint Service. The ec2_vpc_endpoint module(Ansible version 2.4) can only create endPoint gateway.<br><br>So i write a customer ansible module to create endPoint interface and endPoint service. Detail</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://smilecoder.cc/2018/01/20/Why-Black-is-0-and-white-is-255/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lychenpan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello Happiness">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/20/Why-Black-is-0-and-white-is-255/" itemprop="url">Morphological operations</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-20T19:07:33+08:00">
                2018-01-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>This blog is to help to distinguish each kind of morphological operations. Just like erosion and dilation, their effact are opposite, how to remeber  them clearly? </p>
<p><strong> Why Black is 0 and white is 255<br>In image processing, it is always hard to remember clearly about the gray level of black and white.  We can remember their gray levels by understanding how black and white comes.   </strong></p>
<ol>
<li>Firstly, we need to have a knowledge about RGB model,  Please refer <a href="https://en.wikipedia.org/wiki/RGB_color_model" target="_blank" rel="noopener">RGB color model</a>, and RGB model is only for the light that comes directly from a light source.<a href="https://www.quora.com/How-can-colors-like-black-or-white-be-made-with-the-RGB-color-model" target="_blank" rel="noopener">Quora</a></li>
<li>Then 0 means no light comes from the light source, which means dark or black.  And 255 means it will have a maximum light, when all RGB have the maximum value, the mix will be white.</li>
</ol>
<p><strong> Then morphological operations </strong></p>
<ol>
<li>Refer <a href="https://docs.opencv.org/3.0-beta/doc/py_tutorials/py_imgproc/py_morphological_ops/py_morphological_ops.html" target="_blank" rel="noopener">opencv document</a></li>
<li>Some key points:  <ul>
<li>Dilation and erosion is a kind of converlution operation. Dilation use the max value(Whiter value) and erosion use the min value(Black value) of the kernel.  So dilation increase white region, and erosion decrease the white region. (Attention, the image used in this scenario is white foreground and black background, which is opposite with common situation )</li>
<li>Opening: erosion followed by dilation,  [Erosion can remove little white noise, and make it disappear]</li>
<li>Closing: dilation followd by erosion, which can close small black holes <strong>in white object</strong>. The small holes will not appear because it is surrounded by white object.</li>
</ul>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://smilecoder.cc/2017/12/27/Image-Binarization/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lychenpan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello Happiness">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/27/Image-Binarization/" itemprop="url">Image Binarization</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-12-27T18:29:00+08:00">
                2017-12-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>Binarization is one of such important image segmentation approaches for finding out the area of interest from an image by separating the pixels into two groups: one representing the object and the other background.</strong></p>
<h4 id="1-Why-binarize-image"><a href="#1-Why-binarize-image" class="headerlink" title="1.Why binarize image:"></a>1.Why binarize image:</h4><ul>
<li>Remove noise（Not a standard method)</li>
<li>(Very Simple) image segmentation:  isolate the background and ROI </li>
<li>Reduce compution cost (It is very quick)<br><br>For document OCR, binarization is a necessary step. The merges, fractures, and other deformations in the character shapes as a consequence of incorrect thresholding are the main reasons of OCR performance deterioration</li>
</ul>
<h4 id="2-Binarization-methods"><a href="#2-Binarization-methods" class="headerlink" title="2.Binarization methods:"></a>2.Binarization methods:</h4><p>According to threshold:</p>
<ol>
<li>Global threshold.  <a href="http://imagej.net/Auto_Threshold" target="_blank" rel="noopener">OTSU, Traingle and so on.</a></li>
<li>Adaptive threshold (Window sliding; local statistics: range, variance) <a href="http://imagej.net/Auto_Local_Threshold" target="_blank" rel="noopener">Niblack, Sauvola, Adaptive OTSU</a></li>
</ol>
<p>Depending on which principal criteria they consider in calculating the threshold.</p>
<ol>
<li>Image variace </li>
<li>Image contrast</li>
<li>Entropy-based</li>
</ol>
<p>Different targets of binarization:  </p>
<ol>
<li>Document Images: printed document, handwrittern document, historical handwrittern.</li>
<li>Graphic Images</li>
<li>Video.</li>
</ol>
<h4 id="3-Document-Binarization-methods"><a href="#3-Document-Binarization-methods" class="headerlink" title="3.Document Binarization methods"></a>3.Document Binarization methods</h4><p>&emsp;Fast and accurate document binarization is becoming more and more important. <br><br>&emsp;But it is still an unresolved problem, because modeling the document foreground/background is very difficult due to various types of document degration such as: <br><br>&emsp;&emsp;&emsp;<strong>uneven illumination, image contrast variation, bleeding-through, smear, shadow, background noise and so on</strong>. <a href="https://www.researchgate.net/figure/Example-document-images-in-DIBCOs-dataset-that-illustrate-document-degradation-including_220163435" target="_blank" rel="noopener">examples</a></p>
<p>Classical Binarization methods: </p>
<ol>
<li><p>Otsu algorithm:<br>  <a href="https://en.wikipedia.org/wiki/Otsu%27s_method" target="_blank" rel="noopener">wikipedia</a>; <a href="https://docs.opencv.org/3.3.1/d7/d4d/tutorial_py_thresholding.html" target="_blank" rel="noopener">OpenCV</a></p>
</li>
<li><p>Niblack algorithm: </p>
<pre><code>T = m + k*s;   
</code></pre><p>&emsp; m,s: mean and variace of gray values in the sliding window.<br><br>&emsp;Result is not senstive to the window size as long as window covers at least 1-2 characters.<br><br>&emsp; k=0.6 (smaller k will gives thick/unclear strokes)<br><br>&emsp; DrawBack:  Noise created in the area don’t contains text. </p>
</li>
<li>Sauvola algorithm:<br>Try to solve the drawBack of Niblack by adding hypothesis on texts and background. Normalize the standard deviation by its dynamic range.<br><br> DrawBack: low-contrast text regions.<pre><code>T = m * (1 - k *(1-s/R)
</code></pre><strong><a href="http://scikit-image.org/docs/dev/auto_examples/segmentation/plot_niblack_sauvola.html" target="_blank" rel="noopener">compare example</a></strong></li>
<li>WolfJoin:<br><br>Imporve by normalize the contrast and the mean gray level of image.<pre><code>T = m − k*α*(m−M),          α = 1−s/R, R = max(s), M = min(greylevel)
</code></pre> <a href="https://github.com/brandonmpetty/Doxa" target="_blank" rel="noopener">implementation and compare</a><br> <br><a href="https://github.com/chriswolfvision/local_adaptive_binarization" target="_blank" rel="noopener">example 2</a></li>
<li>Bernsen:<br><br> Image contrast based.<pre><code>C = max(I)-min(I);  T, w
</code></pre></li>
<li>Kapur:<br><br><a href="https://www.google.com.sg/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;ved=0ahUKEwi2x_DlhM3YAhVIQI8KHfc7BbcQFggnMAA&amp;url=http%3A%2F%2Fpequan.lip6.fr%2F~bereziat%2Fpima%2F2012%2Fseuillage%2Fkapur85.pdf&amp;usg=AOvVaw3oVJHOD0qO9ZGM_ODG9_JC" target="_blank" rel="noopener">entropy-based</a></li>
</ol>
<h4 id="4-useful-links"><a href="#4-useful-links" class="headerlink" title="4. useful links"></a>4. useful links</h4><p><a href="https://vc.ee.duth.gr/dibco2017/" target="_blank" rel="noopener">DIBCO</a><br><a href="http://icfhr2018.org/" target="_blank" rel="noopener">ICFHR</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://smilecoder.cc/2017/11/16/Custom-lombok-buider/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lychenpan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello Happiness">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/16/Custom-lombok-buider/" itemprop="url">Custom lombok buider</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-11-16T18:09:00+08:00">
                2017-11-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/self-record/" itemprop="url" rel="index">
                    <span itemprop="name">self-record</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Use lombok’s annotation will reduce lots of redundant code in java, like getter and setter.<br><br>Less talk, show the code</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@Data</span><br><span class="line">@AllArgsConstructor</span><br><span class="line">@NoArgsConstructor</span><br><span class="line">@Builder</span><br><span class="line">public class JobStatusMessage &#123;</span><br><span class="line">    private String jobID;</span><br><span class="line">    @NonNull</span><br><span class="line">    private String status;</span><br><span class="line">    @NonNull</span><br><span class="line">    private String version;</span><br><span class="line">    private String error;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>In this way, we can construct the data class in a very easy way:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">JobStatusMessage jobStatusMessage = JobStatusMessage.builder()</span><br><span class="line">				.status(&quot;failed&quot;)</span><br><span class="line">                .version(&quot;18.01&quot;)</span><br><span class="line">                .error(ex.getMessage()).build();</span><br></pre></td></tr></table></figure>
<p>Builder supply each setter method for each field. But it has limitition. What if we want to setter multi fields in one time.<br><br> We can cutom the builder this way:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">@Data</span><br><span class="line">@AllArgsConstructor</span><br><span class="line">@NoArgsConstructor</span><br><span class="line">@Builder</span><br><span class="line">public class JobStatusMessage &#123;</span><br><span class="line">    private String jobID;</span><br><span class="line">    @NonNull</span><br><span class="line">    private String status;</span><br><span class="line">    @NonNull</span><br><span class="line">    private String version;</span><br><span class="line">    private String error;</span><br><span class="line">    public static class JobStatusMessageBuilder &#123;</span><br><span class="line">        public JobStatusMessageBuilder success(String jobID, String status, String error) &#123;</span><br><span class="line">            return this.jobID(jobID).status(&quot;success&quot;).version(&quot;18.01&quot;).error(error);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Then u can construct data object more eaiser way:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JobStatusMessage jobStatusMessage = JobStatusMessage.builder().success(&quot;test&quot;,&quot;test&quot;,&quot;test&quot;).build();</span><br></pre></td></tr></table></figure></p>
<p>In the same time, filed setter function are still kept.</p>
<p>TODO: why this works??</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://smilecoder.cc/2017/11/16/Spring-parameter-validation-of-controller/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lychenpan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello Happiness">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/16/Spring-parameter-validation-of-controller/" itemprop="url">Spring parameter validation of controller</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-11-16T11:21:20+08:00">
                2017-11-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Using controller advice to validate parameter or content-type, and handle the exception at the same time.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://smilecoder.cc/2017/11/14/SpringBoot-Parameter-Validation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lychenpan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello Happiness">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/14/SpringBoot-Parameter-Validation/" itemprop="url">SpringBoot Parameter Validation</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-11-14T19:32:38+08:00">
                2017-11-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Check readme later</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://smilecoder.cc/2017/11/14/Spring-Unit-Test/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lychenpan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hello Happiness">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/14/Spring-Unit-Test/" itemprop="url">Spring Unit Test</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-11-14T19:29:00+08:00">
                2017-11-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
                  . 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/Spring/" itemprop="url" rel="index">
                    <span itemprop="name">Spring</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Something need to study:</p>
<p>Mock</p>
<p>parameterize unit test</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">lychenpan</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">Artikel</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">Kategorien</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">10</span>
                  <span class="site-state-item-name">Tags</span>
                
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lychenpan</span>

  
</div>


  <div class="powered-by">Erstellt mit  <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
